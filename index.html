<!DOCTYPE html>
<html>
<head>
	<title>CalcPro</title>
</head>
<style>
body {
	font-family: sans-serif;
}
</style>
<body>
	<textarea id="area" rows=30 cols=100 placeholder="Type any equation, hit enter to calculate."></textarea>
	<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math">Math Reference</a></p>
	<p>All Math functions are globals.</p>
	<p><a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators">Operators Reference</a></p>
	<p><a href="https://github.com/mochawoof/calcpro">GitHub</a></p>
	<p>v1.1</p>
</body>
<script>
"use strict";

Object.getOwnPropertyNames(Math).forEach((e) => {
	window[e] = Math[e];
});

let area = document.getElementById("area");

area.oninput = (e) => {
	if (e.inputType == "insertLineBreak") {
		let split = area.value.split("\n");
		if (area.selectionStart == area.value.length) {
			let split = area.value.split("\n");
			let line = split[split.length - 2];
			
			if (line.trim() != "") {
				try {
					split[split.length - 1] = eval(line);
				} catch {
					split[split.length - 1] = "Syntax Error";
				}
				split[split.length] = "";
				
				area.value = "";
				for (let i = 0; i < split.length; i++) {
					area.value += split[i] + ((i < split.length - 1) ? "\n" : "");
				}
			}
		}
	}
}
</script>
</html>
